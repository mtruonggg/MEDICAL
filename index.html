<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Phỏng Vấn Tuyển Dụng Medic</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.5; }
    h1, h2 { text-align: center; }
    .question { margin: 15px 0; }
    .options label { display: block; margin-left: 20px; }
    textarea { width: 100%; min-height: 80px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 15px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>PHỎNG VẤN TUYỂN DỤNG MEDIC</h1>
  <h2>Bài thi 30 câu (25 trắc nghiệm + 5 tình huống)</h2>

  <div>
    <label>Tên nhân vật (IC): <input type="text" id="name"></label><br>
    <label>Tuổi nhân vật: <input type="number" id="age"></label><br>
    <label>Discord ID: <input type="text" id="discord"></label>
  </div>

  <form id="quizForm"></form>
  <button type="button" onclick="submitQuiz()">Nộp bài</button>

  <div id="result"></div>

<script>
const questions = [
  {q: "Medic có được phép sử dụng súng không?", options:["Không","Có khi tự vệ","Lúc nào cũng được"], answer:"Không"},
  {q: "Khi thấy người bị tai nạn, việc đầu tiên bạn phải làm là?", options:["Đánh giá tình trạng và sơ cứu","Bỏ qua","Gọi PD"], answer:"Đánh giá tình trạng và sơ cứu"},
  {q: "Medic có quyền bắt giữ người không?", options:["Có","Không","Chỉ khi có PD đi cùng"], answer:"Không"},
  {q: "Nếu bệnh nhân tỉnh dậy giữa ca cấp cứu do lag, bạn làm gì?", options:["Tiếp tục RP","Kết thúc ngay","Bỏ mặc"], answer:"Tiếp tục RP"},
  {q: "Ai có quyền chỉ huy hiện trường có nạn nhân + đấu súng?", options:["Medic","PD","Người dân"], answer:"PD"},
  {q: "Khi đang cấp cứu mà có nổ súng, medic nên làm gì?", options:["Tiếp tục cứu","Bỏ chạy không báo ai","Giữ an toàn và báo PD"], answer:"Giữ an toàn và báo PD"},
  {q: "Medic có được đi một mình đến hiện trường nguy hiểm không?", options:["Có","Không","Chỉ khi PD cho phép"], answer:"Không"},
  {q: "Khi gặp nhiều bệnh nhân cùng lúc, medic ưu tiên ai trước?", options:["Người thân","Người nặng nhất","Người nào trả tiền nhiều hơn"], answer:"Người nặng nhất"},
  {q: "Có được dùng /revive ngoài RP không?", options:["Không","Có","Tùy tình huống"], answer:"Không"},
  {q: "Khi PD yêu cầu rời hiện trường, medic phải làm gì?", options:["Tiếp tục cứu","Tuân theo lệnh PD","Cãi lại"], answer:"Tuân theo lệnh PD"},
  {q: "Medic có được dùng phương tiện PD để đi cứu thương không?", options:["Không bao giờ","Có, khi PD cho phép","Lúc nào cũng được"], answer:"Không bao giờ"},
  {q: "Khi đi cấp cứu, medic phải ưu tiên phương tiện gì?", options:["Xe cá nhân","Xe cứu thương","Bất kỳ xe nào tiện"], answer:"Xe cứu thương"},
  {q: "Khi đang đi cứu thương, có được vượt đèn đỏ không?", options:["Có, nhưng phải bật còi + đèn ưu tiên","Không bao giờ","Tùy tình huống"], answer:"Có, nhưng phải bật còi + đèn ưu tiên"},
  {q: "Medic có được tham gia các hoạt động phạm pháp không?", options:["Không","Có, nếu ngoài giờ làm","Tùy tình huống"], answer:"Không"},
  {q: "Khi cấp cứu, medic cần phải:", options:["Giữ đúng quy trình RP","Làm nhanh bỏ qua chi tiết","Chỉ gõ /revive cho xong"], answer:"Giữ đúng quy trình RP"},
  {q: "Khi bệnh nhân chết do PD bắn, medic có quyền chất vấn PD không?", options:["Có quyền nhưng cần lịch sự và RP","Không","Chửi lại"], answer:"Có quyền nhưng cần lịch sự và RP"},
  {q: "Medic có thể cấp cứu cho tội phạm đang bị truy nã không?", options:["Có, khi PD cho phép","Không","Chỉ khi không ai thấy"], answer:"Có, khi PD cho phép"},
  {q: "Nếu gặp tình huống khẩn cấp mà thiếu nhân lực, medic phải làm gì?", options:["Gọi thêm đồng đội qua radio/dispatch","Bỏ mặc bệnh nhân","Nhờ người dân cứu hộ"], answer:"Gọi thêm đồng đội qua radio/dispatch"},
  {q: "Medic có được quyền xóa log ca trực không?", options:["Không","Có","Tùy tình huống"], answer:"Không"},
  {q: "Khi đang chở bệnh nhân, nếu PD yêu cầu dừng lại thì phải làm gì?", options:["Từ chối","Dừng xe và giải thích","Bỏ chạy"], answer:"Dừng xe và giải thích"},
  {q: "Medic có được lạm dụng quyền /revive để farm tiền không?", options:["Không","Có","Tùy tình huống"], answer:"Không"},
  {q: "Nếu bệnh nhân không hợp tác RP, medic nên làm gì?", options:["Giải thích, yêu cầu hợp tác","Chửi lại","Bỏ mặc"], answer:"Giải thích, yêu cầu hợp tác"},
  {q: "Trong bệnh viện, ai có quyền cao nhất về y tế?", options:["Bác sĩ trưởng/EMS Leader","PD","Người dân"], answer:"Bác sĩ trưởng/EMS Leader"},
  {q: "Khi nhận ca trực, medic phải làm gì đầu tiên?", options:["Check dụng cụ, xe cứu thương và radio","Ngồi chờ","Đi chơi"], answer:"Check dụng cụ, xe cứu thương và radio"},
  {q: "Khi kết thúc ca trực, medic phải làm gì?", options:["Báo cáo log, trả xe và thiết bị","Thoát game luôn","Bỏ mặc"], answer:"Báo cáo log, trả xe và thiết bị"}
];

const scenarios = [
  "Nếu bạn thấy đồng nghiệp vi phạm luật RP khi làm nhiệm vụ, bạn sẽ xử lý thế nào?",
  "Khi có nhiều bệnh nhân cùng lúc, bạn sẽ ưu tiên ai trước? Giải thích lý do.",
  "Nếu PD yêu cầu bạn rời khỏi hiện trường trong khi đang cấp cứu, bạn sẽ làm gì?",
  "Nếu bệnh nhân từ chối hợp tác RP, bạn sẽ xử lý thế nào?",
  "Trong tình huống thiếu nhân lực, bạn sẽ sắp xếp công việc ra sao?"
];

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

window.onload = () => {
  const form = document.getElementById("quizForm");
  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    const shuffled = shuffle([...q.options]);
    div.innerHTML = `<p><b>Câu ${i+1}:</b> ${q.q}</p>`;
    shuffled.forEach(opt => {
      div.innerHTML += `<div class="options"><label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label></div>`;
    });
    form.appendChild(div);
  });

  scenarios.forEach((s, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<p><b>Tình huống ${i+1}:</b> ${s}</p><textarea name="s${i}"></textarea>`;
    form.appendChild(div);
  });
};

function submitQuiz() {
  let score = 0;
  questions.forEach((q, i) => {
    const answer = document.querySelector(`input[name="q${i}"]:checked`);
    if(answer && answer.value === q.answer) score++;
  });

  const name = document.getElementById("name").value;
  const age = document.getElementById("age").value;
  const discord = document.getElementById("discord").value;

  let resultText = `Ứng viên: ${name}\nTuổi IC: ${age}\nDiscord: ${discord}\n\nĐiểm trắc nghiệm: ${score}/${questions.length}\n\n--- Câu trả lời tình huống ---\n`;
  scenarios.forEach((s, i) => {
    const ans = document.querySelector(`textarea[name="s${i}"]`).value;
    resultText += `Tình huống ${i+1}: ${s}\nTrả lời: ${ans}\n\n`;
  });

  document.getElementById("result").innerText = resultText;

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(12);
  doc.text("PHIẾU PHỎNG VẤN TUYỂN DỤNG MEDIC", 10, 10);
  doc.text(resultText, 10, 20);
  doc.save(`${name}_phongvan_medic.pdf`);
}
</script>
</body>
</html>
