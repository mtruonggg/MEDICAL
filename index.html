<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>B√†i Thi Ph·ªèng V·∫•n Medic</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; }
    .radio-label input[type="radio"] { accent-color: #0284c7; }
    textarea { resize: vertical; }
  </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-6">
  <div class="w-full max-w-5xl">
    <header class="bg-gradient-to-r from-sky-600 to-cyan-600 text-white rounded-xl shadow-lg p-6 mb-6 animate__animated animate__fadeInDown">
      <h1 class="text-2xl font-bold flex items-center gap-3">
        ü©∫ B√ÄI THI PH·ªéNG V·∫§N TUY·ªÇN D·ª§NG MEDIC
      </h1>
      <p class="mt-1 text-sm opacity-90">ƒêi·ªÅn th√¥ng tin, tr·∫£ l·ªùi c√¢u h·ªèi. H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ch·∫•m ƒëi·ªÉm.</p>
    </header>

    <main class="bg-white rounded-xl shadow-md p-6">
      <!-- Th√¥ng tin ·ª©ng vi√™n -->
      <section class="mb-6">
        <h2 class="text-lg font-medium text-sky-600 mb-3">Th√¥ng tin ·ª©ng vi√™n</h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div>
            <label class="block text-sm font-medium">H·ªç t√™n IC</label>
            <input id="name" type="text" class="mt-1 w-full rounded-md border p-2"/>
          </div>
          <div>
            <label class="block text-sm font-medium">Tu·ªïi IC</label>
            <input id="age" type="number" min="10" class="mt-1 w-full rounded-md border p-2"/>
          </div>
          <div>
            <label class="block text-sm font-medium">Discord ID</label>
            <input id="discord" type="text" class="mt-1 w-full rounded-md border p-2"/>
          </div>
        </div>
      </section>

      <!-- Tr·∫Øc nghi·ªám -->
      <section class="mb-6">
        <h2 class="text-lg font-medium text-sky-600 mb-3">Ph·∫ßn 1: Tr·∫Øc nghi·ªám (25 c√¢u, t·ªïng 15 ƒëi·ªÉm)</h2>
        <div id="quiz" class="space-y-4"></div>
      </section>

      <!-- T√¨nh hu·ªëng -->
      <section class="mb-6">
        <h2 class="text-lg font-medium text-sky-600 mb-3">Ph·∫ßn 2: T√¨nh hu·ªëng (5 c√¢u, t·ªïng 15 ƒëi·ªÉm)</h2>
        <div id="scenarios" class="space-y-4"></div>
      </section>

      <!-- Action -->
      <div class="flex items-center gap-3">
        <button onclick="submitExam()" class="px-6 py-2 bg-sky-600 hover:bg-sky-700 text-white rounded-md font-semibold shadow">N·ªôp b√†i</button>
        <button onclick="resetForm()" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md">ƒê·∫∑t l·∫°i</button>
      </div>

      <!-- Result -->
      <div id="result" class="mt-6"></div>
    </main>
  </div>

<script>
/* ================== Danh s√°ch c√¢u h·ªèi ================== */
const questions = [
  { q: "FearRP nghƒ©a l√† g√¨ trong server RP?", 
    options: ["Kh√¥ng ƒë∆∞·ª£c l√†m li·ªÅu khi b·ªã ƒëe do·∫° m·∫°ng s·ªëng", "Kh√¥ng s·ª£ ai trong RP", "ƒê∆∞·ª£c ph√©p ch·ªëng l·∫°i d√π nguy hi·ªÉm"], a: 0 },
  { q: "NLR (New Life Rule) l√† g√¨?", 
    options: ["Sau khi ch·∫øt qu√™n to√†n b·ªô t√¨nh hu·ªëng tr∆∞·ªõc ƒë√≥", "Nh·ªõ l·∫°i m·ªçi th·ª© sau khi ch·∫øt", "ƒê∆∞·ª£c h·ªìi sinh v√† ti·∫øp t·ª•c ƒë√°nh nhau"], a: 0 },
  { q: "RDM l√† h√†nh vi n√†o?", 
    options: ["Gi·∫øt ng∆∞·ªùi kh√¥ng l√Ω do", "Gi·∫øt trong t·ª± v·ªá", "Gi·∫øt theo k·ªãch b·∫£n"], a: 0 },
  { q: "VDM l√† g√¨?", 
    options: ["D√πng xe c√°n ng∆∞·ªùi kh√¥ng RP", "ƒêua xe h·ª£p ph√°p", "ƒê·ªó xe sai ch·ªó"], a: 0 },
  { q: "Meta Gaming (MG) nghƒ©a l√† g√¨?", 
    options: ["D√πng OOC info v√†o IC", "D√πng IC info v√†o OOC", "N√≥i chuy·ªán trong Discord"], a: 0 },
  { q: "Power Gaming (PG) l√† g√¨?", 
    options: ["L√†m ƒëi·ªÅu phi logic, √©p ng∆∞·ªùi kh√°c kh√¥ng c√≥ l·ª±a ch·ªçn", "ƒê√≥ng vai h·ª£p l√Ω", "RP ƒë√∫ng lu·∫≠t"], a: 0 },
  { q: "Bug Abuse l√† g√¨?", 
    options: ["L·ª£i d·ª•ng bug game ƒë·ªÉ c√≥ l·ª£i", "B√°o l·ªói cho admin", "Kh√¥ng d√πng bug"], a: 0 },
  { q: "Combat Logging l√† g√¨?", 
    options: ["Tho√°t game khi ƒëang combat RP", "RP combat h·ª£p l√Ω", "AFK trong game"], a: 0 },
  { q: "Mix IC/OOC l√† g√¨?", 
    options: ["D√πng OOC trong IC ho·∫∑c ng∆∞·ª£c l·∫°i", "IC t√°ch bi·ªát OOC", "Kh√¥ng d√πng voice chat"], a: 0 },
  { q: "Troll RP l√† g√¨?", 
    options: ["G√¢y r·ªëi, ph√° RP ng∆∞·ªùi kh√°c", "Gi√∫p ƒë·ª° newbie", "RP nghi√™m t√∫c"], a: 0 },
  { q: "Cop Baiting l√† g√¨?", 
    options: ["C·ªë t√¨nh ch·ªçc c·∫£nh s√°t ƒë·ªÉ b·ªã b·∫Øt", "RP ph·∫°m t·ªôi h·ª£p l√Ω", "Tu√¢n th·ªß lu·∫≠t IC"], a: 0 },
  { q: "Fail RP l√† g√¨?", 
    options: ["Di·ªÖn kh√¥ng h·ª£p logic, sai lu·∫≠t RP", "RP ƒë√∫ng", "Tu√¢n th·ªß k·ªãch b·∫£n"], a: 0 },
  { q: "IC l√† g√¨?", options: ["In Character - h√†nh ƒë·ªông trong vai", "Out of Character", "In Combat"], a: 0 },
  { q: "OOC l√† g√¨?", options: ["Out of Character - ngo√†i vai", "In Character", "Off Combat"], a: 0 },
  { q: "Medic c√≥ ƒë∆∞·ª£c mang v≈© kh√≠ kh√¥ng?", options: ["Kh√¥ng", "S√∫ng ng·∫Øn", "T·∫•t c·∫£"], a: 0 },
  { q: "Khi g·∫∑p tai n·∫°n giao th√¥ng, vi·ªác ƒë·∫ßu ti√™n Medic c·∫ßn l√†m l√† g√¨?", options: ["ƒê·∫£m b·∫£o an to√†n hi·ªán tr∆∞·ªùng", "B·∫Øt th·ªß ph·∫°m", "B·ªè qua"], a: 0 },
  { q: "Medic c√≥ ƒë∆∞·ª£c v∆∞·ª£t ƒë√®n ƒë·ªè kh√¥ng?", options: ["C√≥ khi l√†m nhi·ªám v·ª• kh·∫©n", "Kh√¥ng bao gi·ªù", "Ch·ªâ khi c√≥ police h·ªô t·ªëng"], a: 0 },
  { q: "Tr√°ch nhi·ªám c·ªßa Medic khi revive l√† g√¨?", options: ["H·ªó tr·ª£ b·ªánh nh√¢n RP h·ªìi t·ªânh", "B·ªè m·∫∑c", "L·∫•y ti·ªÅn r·ªìi b·ªè ƒëi"], a: 0 },
  { q: "Khi b·ªánh nh√¢n t·ª≠ vong RP, Medic ph·∫£i l√†m g√¨?", options: ["Tu√¢n th·ªß NLR", "Revive ngay", "G·ªçi admin"], a: 0 },
  { q: "Khi g·∫∑p v·ª• ph·∫°m ph√°p, Medic ph·∫£i?", options: ["Ch·ªâ h·ªó tr·ª£ y t·∫ø, kh√¥ng can thi·ªáp", "B·∫Øt t·ªôi ph·∫°m", "RP b·∫Øn tr·∫£"], a: 0 },
  { q: "Giao ti·∫øp khi c·ª©u ch·ªØa b·ªánh nh√¢n c·∫ßn?", options: ["L·ªãch s·ª±, chuy√™n nghi·ªáp", "Ch·ªçc gh·∫πo", "B·ªè qua"], a: 0 },
  { q: "Khi nhi·ªÅu ng∆∞·ªùi b·ªã th∆∞∆°ng, Medic ∆∞u ti√™n?", options: ["Ng∆∞·ªùi b·ªã n·∫∑ng nh·∫•t", "Ng∆∞·ªùi quen", "Ai tr·∫£ ti·ªÅn tr∆∞·ªõc"], a: 0 },
  { q: "Medic c√≥ ƒë∆∞·ª£c tham gia Crime RP kh√¥ng?", options: ["Kh√¥ng", "C√≥ khi b√≠ m·∫≠t", "Lu√¥n ƒë∆∞·ª£c"], a: 0 },
  { q: "Medic r·ªùi ca tr·ª±c m√† kh√¥ng b√°o c√°o l√†?", options: ["Sai quy ƒë·ªãnh", "ƒê∆∞·ª£c ph√©p", "Kh√¥ng quan tr·ªçng"], a: 0 },
  { q: "Medic d√πng xe c·ª©u th∆∞∆°ng cho m·ª•c ƒë√≠ch c√° nh√¢n ƒë∆∞·ª£c kh√¥ng?", options: ["Kh√¥ng ƒë∆∞·ª£c ph√©p", "ƒê∆∞·ª£c khi c·∫•p tr√™n cho", "T√πy √Ω"], a: 0 }
];

/* ========== T√¨nh hu·ªëng ========== */
const scenarios = [
  { q: "B·∫°n g·∫∑p 2 ng∆∞·ªùi b·ªã th∆∞∆°ng nh·∫π v√† 1 ng∆∞·ªùi b·∫•t t·ªânh nguy k·ªãch, b·∫°n x·ª≠ l√Ω th·∫ø n√†o?", keywords:["nguy k·ªãch","∆∞u ti√™n","g·ªçi h·ªó tr·ª£"], max:3 },
  { q: "B·ªánh nh√¢n kh√¥ng h·ª£p t√°c RP khi c·∫•p c·ª©u, b·∫°n l√†m g√¨?", keywords:["nh·∫Øc nh·ªü","b√°o admin","gi·ªØ RP"], max:3 },
  { q: "Th·∫•y ƒë·ªìng nghi·ªáp Medic vi ph·∫°m FailRP, b·∫°n x·ª≠ l√Ω sao?", keywords:["b√°o c·∫•p tr√™n","nh·∫Øc nh·ªü"], max:3 },
  { q: "B·∫°n b·ªã t·ªôi ph·∫°m chƒ©a s√∫ng khi ƒëi c·∫•p c·ª©u, b·∫°n l√†m g√¨?", keywords:["fearrp","h·ª£p t√°c","kh√¥ng ch·ªëng"], max:3 },
  { q: "Ng∆∞·ªùi ch∆°i li√™n t·ª•c troll g·ªçi c·ª©u th∆∞∆°ng gi·∫£, b·∫°n x·ª≠ l√Ω sao?", keywords:["b√°o admin","kh√¥ng c·ª©u","b√°o c·∫•p tr√™n"], max:3 }
];

/* ========== Shuffle (x√°o tr·ªôn) ========== */
function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

/* Render quiz */
function renderQuiz(){
  const quiz=document.getElementById("quiz");
  quiz.innerHTML="";
  const shuffledQ=shuffle([...questions]).slice(0,25);

  shuffledQ.forEach((item,i)=>{
    const opt=shuffle(item.options.map((o,idx)=>({o,idx})));
    const qCard=document.createElement("div");
    qCard.className="p-4 bg-slate-50 border rounded-md";
    qCard.innerHTML=`<p class="font-medium mb-2">C√¢u ${i+1}: ${item.q}</p>
      <div class="grid sm:grid-cols-3 gap-2">
        ${opt.map((o,j)=>`
          <label class="radio-label flex items-center gap-2 p-2 border rounded-md">
            <input type="radio" name="q${i}" value="${o.idx}"> ${String.fromCharCode(65+j)}. ${o.o}
          </label>`).join("")}
      </div>`;
    quiz.appendChild(qCard);
    item._order=opt; // l∆∞u l·∫°i
    item._id=i; // g√°n id
  });
  window._quiz=shuffledQ;
}

/* Render scenarios */
function renderScenarios(){
  const sDiv=document.getElementById("scenarios");
  sDiv.innerHTML="";
  scenarios.forEach((s,i)=>{
    const div=document.createElement("div");
    div.className="p-4 bg-slate-50 border rounded-md";
    div.innerHTML=`
      <p class="font-medium mb-2">T√¨nh hu·ªëng ${i+1}</p>
      <p class="text-slate-600 mb-2">${s.q}</p>
      <textarea name="s${i}" rows="3" class="w-full p-2 border rounded-md"></textarea>`;
    sDiv.appendChild(div);
  });
}

/* N·ªôp b√†i */
function submitExam(){
  let scoreQuiz=0;
  window._quiz.forEach((q,i)=>{
    const ans=document.querySelector(`input[name=q${i}]:checked`);
    if(ans && parseInt(ans.value)===q.a) scoreQuiz+=0.6;
  });

  let scoreScenario=0;
  scenarios.forEach((s,i)=>{
    const ans=document.querySelector(`textarea[name=s${i}]`).value.toLowerCase();
    let p=0;
    s.keywords.forEach(k=>{
      if(ans.includes(k)) p+=s.max/s.keywords.length;
    });
    if(p>s.max)p=s.max;
    scoreScenario+=p;
  });

  const total=scoreQuiz+scoreScenario;
  const name=document.getElementById("name").value||"Ch∆∞a nh·∫≠p";
  const age=document.getElementById("age").value||"Ch∆∞a nh·∫≠p";
  const discord=document.getElementById("discord").value||"Ch∆∞a nh·∫≠p";

  document.getElementById("result").innerHTML=`
    <div class="p-4 border rounded-lg bg-sky-50">
      <p class="font-semibold mb-2">·ª®ng vi√™n: ${name} | Tu·ªïi IC: ${age} | Discord: ${discord}</p>
      <p class="text-sky-900 font-medium mb-2">ƒêi·ªÉm tr·∫Øc nghi·ªám: ${scoreQuiz.toFixed(1)}/15</p>
      <p class="text-sky-900 font-medium mb-2">ƒêi·ªÉm t√¨nh hu·ªëng: ${scoreScenario.toFixed(1)}/15</p>
      <p class="text-sky-900 font-bold text-lg">üéØ T·ªïng ƒëi·ªÉm: ${total.toFixed(1)}/30</p>
    </div>`;
}

/* Reset */
function resetForm(){
  document.getElementById("name").value="";
  document.getElementById("age").value="";
  document.getElementById("discord").value="";
  renderQuiz();
  renderScenarios();
  document.getElementById("result").innerHTML="";
}

renderQuiz();
renderScenarios();
</script>
</body>
</html>