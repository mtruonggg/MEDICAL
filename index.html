<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>B√†i Test Tuy·ªÉn Medic RP</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: radial-gradient(circle at top, #0f0c29, #302b63, #24243e);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      width: 90%;
      max-width: 900px;
      padding: 30px;
      background: rgba(0,0,0,0.6);
      border-radius: 20px;
      box-shadow: 0 0 25px #00f5ff, 0 0 50px #ff00ff;
      text-align: center;
    }
    h1 {
      font-size: 2em;
      background: linear-gradient(90deg, #00f5ff, #ff00ff, #00ff9d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: glow 3s infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 10px #00f5ff; }
      to { text-shadow: 0 0 30px #ff00ff; }
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 10px;
      border: none;
      font-size: 1em;
    }
    button {
      margin-top: 20px;
      padding: 12px 35px;
      font-size: 1.1em;
      border: none;
      border-radius: 50px;
      background: linear-gradient(45deg, #00f5ff, #ff00ff, #00ff9d);
      color: white;
      cursor: pointer;
      transition: all 0.3s;
    }
    button:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px #fff, 0 0 40px #ff00ff;
    }
    .question {
      margin: 15px 0;
      padding: 15px;
      background: rgba(255,255,255,0.05);
      border-radius: 15px;
      text-align: left;
    }
    .options label {
      display: block;
      margin: 8px 0;
      padding: 8px;
      background: rgba(255,255,255,0.08);
      border-radius: 10px;
      cursor: pointer;
    }
    .options input { margin-right: 8px; }
    .result {
      margin-top: 20px;
      font-size: 1.3em;
      font-weight: bold;
      background: linear-gradient(90deg, #00f5ff, #ff00ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    #fireworks {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìã ƒê∆°n Tuy·ªÉn Medic RP</h1>

    <!-- Form th√¥ng tin ·ª©ng vi√™n -->
    <div id="infoForm">
      <input type="text" id="icName" placeholder="T√™n IC (Trong game)" required>
      <input type="text" id="oocName" placeholder="T√™n OOC (Ngo√†i ƒë·ªùi)" required>
      <input type="number" id="age" placeholder="Tu·ªïi" required>
      <select id="gender">
        <option value="">-- Gi·ªõi t√≠nh --</option>
        <option>Nam</option>
        <option>N·ªØ</option>
        <option>Kh√°c</option>
      </select>
      <input type="text" id="discord" placeholder="Discord ID (V√≠ d·ª•: Ten#1234)" required>
      <textarea id="exp" rows="3" placeholder="Kinh nghi·ªám RP (th·ªùi gian, t·ªï ch·ª©c ƒë√£ tham gia...)"></textarea>
      <button onclick="startQuiz()">B·∫Øt ƒë·∫ßu Test</button>
    </div>

    <!-- Quiz -->
    <form id="quizForm" style="display:none"></form>
    <button id="submitBtn" style="display:none" onclick="submitQuiz()">N·ªôp b√†i</button>
    <div class="result" id="result"></div>
  </div>

  <canvas id="fireworks"></canvas>
  <audio id="fireworksSound" src="https://www.soundjay.com/fireworks/fireworks-1.mp3"></audio>

  <script>
    /* ====== C√¢u h·ªèi tr·∫Øc nghi·ªám (25 c√¢u, 1 ƒëi·ªÉm m·ªói c√¢u) ====== */
    const questions = [
      { q: "FearRP nghƒ©a l√† g√¨ trong server RP?", 
        options: ["Kh√¥ng ƒë∆∞·ª£c l√†m li·ªÅu khi b·ªã ƒëe do·∫° m·∫°ng s·ªëng", "Kh√¥ng s·ª£ ai trong RP", "ƒê∆∞·ª£c ph√©p ch·ªëng l·∫°i d√π nguy hi·ªÉm"], a: 0 },
      { q: "NLR (New Life Rule) l√† g√¨?", 
        options: ["Sau khi ch·∫øt qu√™n to√†n b·ªô t√¨nh hu·ªëng tr∆∞·ªõc ƒë√≥", "Nh·ªõ l·∫°i m·ªçi th·ª© sau khi ch·∫øt", "ƒê∆∞·ª£c h·ªìi sinh v√† ti·∫øp t·ª•c ƒë√°nh nhau"], a: 0 },
      { q: "RDM l√† h√†nh vi n√†o?", options: ["Gi·∫øt ng∆∞·ªùi kh√¥ng l√Ω do", "Gi·∫øt trong t·ª± v·ªá", "Gi·∫øt theo k·ªãch b·∫£n"], a: 0 },
      { q: "VDM l√† g√¨?", options: ["D√πng xe c√°n ng∆∞·ªùi kh√¥ng RP", "ƒêua xe h·ª£p ph√°p", "ƒê·ªó xe sai ch·ªó"], a: 0 },
      { q: "Meta Gaming (MG) nghƒ©a l√† g√¨?", options: ["D√πng OOC info v√†o IC", "D√πng IC info v√†o OOC", "N√≥i chuy·ªán trong Discord"], a: 0 },
      { q: "Power Gaming (PG) l√† g√¨?", options: ["L√†m ƒëi·ªÅu phi logic, √©p ng∆∞·ªùi kh√°c kh√¥ng c√≥ l·ª±a ch·ªçn", "ƒê√≥ng vai h·ª£p l√Ω", "RP ƒë√∫ng lu·∫≠t"], a: 0 },
      { q: "Bug Abuse l√† g√¨?", options: ["L·ª£i d·ª•ng bug game ƒë·ªÉ c√≥ l·ª£i", "B√°o l·ªói cho admin", "Kh√¥ng d√πng bug"], a: 0 },
      { q: "Combat Logging l√† g√¨?", options: ["Tho√°t game khi ƒëang combat RP", "RP combat h·ª£p l√Ω", "AFK trong game"], a: 0 },
      { q: "Mix IC/OOC l√† g√¨?", options: ["D√πng OOC trong IC ho·∫∑c ng∆∞·ª£c l·∫°i", "IC t√°ch bi·ªát OOC", "Kh√¥ng d√πng voice chat"], a: 0 },
      { q: "Troll RP l√† g√¨?", options: ["G√¢y r·ªëi, ph√° RP ng∆∞·ªùi kh√°c", "Gi√∫p ƒë·ª° newbie", "RP nghi√™m t√∫c"], a: 0 },
      { q: "Cop Baiting l√† g√¨?", options: ["C·ªë t√¨nh ch·ªçc c·∫£nh s√°t ƒë·ªÉ b·ªã b·∫Øt", "RP ph·∫°m t·ªôi h·ª£p l√Ω", "Tu√¢n th·ªß lu·∫≠t IC"], a: 0 },
      { q: "Fail RP l√† g√¨?", options: ["Di·ªÖn kh√¥ng h·ª£p logic, sai lu·∫≠t RP", "RP ƒë√∫ng", "Tu√¢n th·ªß k·ªãch b·∫£n"], a: 0 },
      { q: "IC l√† g√¨?", options: ["In Character - h√†nh ƒë·ªông trong vai", "Out of Character", "In Combat"], a: 0 },
      { q: "OOC l√† g√¨?", options: ["Out of Character - ngo√†i vai", "In Character", "Off Combat"], a: 0 },
      { q: "Medic c√≥ ƒë∆∞·ª£c mang v≈© kh√≠ kh√¥ng?", options: ["Kh√¥ng", "S√∫ng ng·∫Øn", "T·∫•t c·∫£"], a: 0 },
      { q: "Khi g·∫∑p tai n·∫°n giao th√¥ng, vi·ªác ƒë·∫ßu ti√™n Medic c·∫ßn l√†m l√† g√¨?", options: ["ƒê·∫£m b·∫£o an to√†n hi·ªán tr∆∞·ªùng", "B·∫Øt th·ªß ph·∫°m", "B·ªè qua"], a: 0 },
      { q: "Medic c√≥ ƒë∆∞·ª£c v∆∞·ª£t ƒë√®n ƒë·ªè kh√¥ng?", options: ["C√≥ khi l√†m nhi·ªám v·ª• kh·∫©n", "Kh√¥ng bao gi·ªù", "Ch·ªâ khi c√≥ police h·ªô t·ªëng"], a: 0 },
      { q: "Tr√°ch nhi·ªám c·ªßa Medic khi revive l√† g√¨?", options: ["H·ªó tr·ª£ b·ªánh nh√¢n RP h·ªìi t·ªânh", "B·ªè m·∫∑c", "L·∫•y ti·ªÅn r·ªìi b·ªè ƒëi"], a: 0 },
      { q: "Khi b·ªánh nh√¢n t·ª≠ vong RP, Medic ph·∫£i l√†m g√¨?", options: ["Tu√¢n th·ªß NLR", "Revive ngay", "G·ªçi admin"], a: 0 },
      { q: "Khi g·∫∑p v·ª• ph·∫°m ph√°p, Medic ph·∫£i?", options: ["Ch·ªâ h·ªó tr·ª£ y t·∫ø, kh√¥ng can thi·ªáp", "B·∫Øt t·ªôi ph·∫°m", "RP b·∫Øn tr·∫£"], a: 0 },
      { q: "Giao ti·∫øp khi c·ª©u ch·ªØa b·ªánh nh√¢n c·∫ßn?", options: ["L·ªãch s·ª±, chuy√™n nghi·ªáp", "Ch·ªçc gh·∫πo", "B·ªè qua"], a: 0 },
      { q: "Khi nhi·ªÅu ng∆∞·ªùi b·ªã th∆∞∆°ng, Medic ∆∞u ti√™n?", options: ["Ng∆∞·ªùi b·ªã n·∫∑ng nh·∫•t", "Ng∆∞·ªùi quen", "Ai tr·∫£ ti·ªÅn tr∆∞·ªõc"], a: 0 },
      { q: "Medic c√≥ ƒë∆∞·ª£c tham gia Crime RP kh√¥ng?", options: ["Kh√¥ng", "C√≥ khi b√≠ m·∫≠t", "Lu√¥n ƒë∆∞·ª£c"], a: 0 },
      { q: "Medic r·ªùi ca tr·ª±c m√† kh√¥ng b√°o c√°o l√†?", options: ["Sai quy ƒë·ªãnh", "ƒê∆∞·ª£c ph√©p", "Kh√¥ng quan tr·ªçng"], a: 0 },
      { q: "Medic d√πng xe c·ª©u th∆∞∆°ng cho m·ª•c ƒë√≠ch c√° nh√¢n ƒë∆∞·ª£c kh√¥ng?", options: ["Kh√¥ng ƒë∆∞·ª£c ph√©p", "ƒê∆∞·ª£c khi c·∫•p tr√™n cho", "T√πy √Ω"], a: 0 }
    ];

    /* ====== C√¢u h·ªèi t√¨nh hu·ªëng (5 c√¢u, 1 ƒëi·ªÉm m·ªói c√¢u ƒë·ªÉ d·ªÖ newbie) ====== */
    const scenarios = [
      { q: "B·∫°n g·∫∑p 2 ng∆∞·ªùi b·ªã th∆∞∆°ng v√† 1 ng∆∞·ªùi nguy k·ªãch, b·∫°n x·ª≠ l√Ω th·∫ø n√†o?", keywords:["nguy k·ªãch","∆∞u ti√™n","g·ªçi h·ªó tr·ª£"], max:1 },
      { q: "B·ªánh nh√¢n kh√¥ng h·ª£p t√°c khi c·∫•p c·ª©u, b·∫°n l√†m g√¨?", keywords:["nh·∫Øc nh·ªü","b√°o admin","gi·ªØ RP"], max:1 },
      { q: "Th·∫•y ƒë·ªìng nghi·ªáp Medic l√†m sai RP, b·∫°n x·ª≠ l√Ω sao?", keywords:["b√°o c·∫•p tr√™n","nh·∫Øc nh·ªü"], max:1 },
      { q: "B·∫°n b·ªã t·ªôi ph·∫°m chƒ©a s√∫ng khi ƒëi c·ª©u ng∆∞·ªùi, b·∫°n l√†m g√¨?", keywords:["fearrp","h·ª£p t√°c","kh√¥ng ch·ªëng"], max:1 },
      { q: "Ng∆∞·ªùi ch∆°i g·ªçi c·ª©u th∆∞∆°ng troll, b·∫°n x·ª≠ l√Ω sao?", keywords:["b√°o admin","kh√¥ng c·ª©u","b√°o c·∫•p tr√™n"], max:1 }
    ];

 /* ===== Render Quiz ===== */
  function startQuiz() {
    document.getElementById("infoForm").style.display = "none";
    const quizForm = document.getElementById("quizForm");
    quizForm.style.display = "block";
    document.getElementById("submitBtn").style.display = "inline-block";

    // Render tr·∫Øc nghi·ªám
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<p><b>${i+1}. ${q.q}</b></p>`;
      const opts = document.createElement("div");
      opts.className = "options";

      // T·∫°o m·∫£ng shuffle options
      const shuffled = q.options.map((opt, idx) => ({ opt, idx }));
      shuffled.sort(() => Math.random() - 0.5); // random

      shuffled.forEach((item) => {
        // ƒê√°nh d·∫•u ƒë√°p √°n ƒë√∫ng ·ªü dataset
        const isCorrect = item.idx === q.a ? 1 : 0;
        opts.innerHTML += `
          <label>
            <input type="radio" name="q${i}" data-correct="${isCorrect}">
            ${item.opt}
          </label>`;
      });

      div.appendChild(opts);
      quizForm.appendChild(div);
    });

    // Render t√¨nh hu·ªëng
    scenarios.forEach((s, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<p><b>${questions.length+i+1}. ${s.q}</b></p>
                       <textarea name="s${i}" rows="3" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi RP..."></textarea>`;
      quizForm.appendChild(div);
    });
  }

  /* ===== N·ªôp b√†i ===== */
  function submitQuiz() {
    let score = 0;
    let correctCount = 0; // ƒê·∫øm s·ªë c√¢u tr·∫Øc nghi·ªám ƒë√∫ng

    // Check tr·∫Øc nghi·ªám
    questions.forEach((q, i) => {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      if (selected && selected.dataset.correct === "1") {
        score++;
        correctCount++;
      }
    });

    // Check t√¨nh hu·ªëng
    scenarios.forEach((s, i) => {
      const ans = document.querySelector(`textarea[name="s${i}"]`).value.toLowerCase();
      let matched = s.keywords.some(k => ans.includes(k));
      if (matched) score += s.max;
    });

    // L·∫•y th√¥ng tin ·ª©ng vi√™n
    const info = {
      icName: document.getElementById("icName").value,
      oocName: document.getElementById("oocName").value,
      age: document.getElementById("age").value,
      gender: document.getElementById("gender").value,
      discord: document.getElementById("discord").value,
      exp: document.getElementById("exp").value
    };

    // Hi·ªán k·∫øt qu·∫£
    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML = `
      <p>üìù ·ª®ng vi√™n: <b>${info.icName}</b> (OOC: ${info.oocName})</p>
      <p>üë§ Tu·ªïi: ${info.age} | Gi·ªõi t√≠nh: ${info.gender} | Discord: ${info.discord}</p>
      <p>üìö Kinh nghi·ªám: ${info.exp}</p>
      <hr>
      <p>‚úÖ Tr·∫Øc nghi·ªám ƒë√∫ng: <b>${correctCount}/25</b></p>
      <p>‚≠ê T·ªïng ƒëi·ªÉm: <b>${score}/30</b></p>
    `;

    if (score === 30) startFireworks();
  }

    /* ===== Hi·ªáu ·ª©ng ph√°o hoa ===== */
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    let fireworks = [];

    class Firework {
      constructor(x, y, color) {
        this.x = x; this.y = y; this.color = color;
        this.radius = Math.random()*2+1;
        this.angle = Math.random()*2*Math.PI;
        this.speed = Math.random()*4+2;
        this.life = 100;
      }
      update(){ this.x+=Math.cos(this.angle)*this.speed; this.y+=Math.sin(this.angle)*this.speed; this.life--; }
      draw(){ ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,2*Math.PI); ctx.fillStyle=this.color; ctx.fill(); }
    }

    function startFireworks() {
      document.getElementById("fireworksSound").play();
      fireworks = [];
      for(let i=0;i<200;i++){
        fireworks.push(new Firework(canvas.width/2, canvas.height/2, `hsl(${Math.random()*360},100%,60%)`));
      }
      animate();
    }
    function animate() {
      ctx.fillStyle="rgba(0,0,0,0.2)"; ctx.fillRect(0,0,canvas.width,canvas.height);
      fireworks.forEach((fw,i)=>{ fw.update(); fw.draw(); if(fw.life<=0) fireworks.splice(i,1); });
      if(fireworks.length>0) requestAnimationFrame(animate);
    }
    window.onresize=()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
  </script>
</body>
</html>