<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ƒê∆°n ·ª®ng Tuy·ªÉn Medic</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 0; padding: 0; min-height: 100vh;
      display: flex; justify-content: center; align-items: center;
    }
    .container {
      width: 85%; max-width: 950px; background: #fff;
      padding: 30px 40px; border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      animation: fadeIn 0.6s ease;
    }
    @keyframes fadeIn { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
    h1 { text-align: center; margin-bottom: 20px; background: linear-gradient(90deg,#667eea,#764ba2);
         -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    label { font-weight: 600; margin-top: 12px; display: block; color: #333; }
    input, select, textarea {
      width: 100%; padding: 10px; margin-top: 6px;
      border: 1px solid #ddd; border-radius: 8px; font-size: 15px; transition: 0.2s;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #667eea; outline: none; box-shadow: 0 0 5px rgba(102,126,234,0.4);
    }
    button {
      background: linear-gradient(90deg,#667eea,#764ba2); color: white;
      padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer;
      margin-top: 20px; font-size: 16px; font-weight: 600; width: 100%; transition: 0.3s;
    }
    button:hover { transform: scale(1.02); box-shadow: 0 5px 15px rgba(102,126,234,0.4); }
    button:disabled { background:#aaa; cursor:not-allowed; box-shadow:none; transform:none; }
    .question { margin: 18px 0; padding: 18px; border-radius: 12px; background:#f9f9fb;
                border-left: 5px solid #667eea; box-shadow: 0 3px 6px rgba(0,0,0,0.05); }
    .question p { font-weight: 600; margin-bottom: 8px; }
    .options label { display: block; margin: 6px 0; cursor: pointer; }
    #popup {
      display: none; position: fixed; top:0;left:0;right:0;bottom:0;
      background: rgba(0,0,0,0.6); justify-content: center; align-items: center; z-index: 999;
    }
    #popup .box {
      background: #fff; padding: 25px 35px; border-radius: 14px; text-align: center;
      max-width: 420px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); animation: scaleIn 0.4s ease;
    }
    @keyframes scaleIn { from{transform:scale(0.8);opacity:0} to{transform:scale(1);opacity:1} }
  </style>
</head>
<body>
  <div class="container">
    <h1>ƒê∆†N ·ª®NG TUY·ªÇN MEDIC</h1>

    <!-- Form th√¥ng tin ·ª©ng vi√™n -->
    <form id="infoForm" onsubmit="event.preventDefault(); startQuiz();">
      <label>IC Name:</label>
      <input type="text" id="icName" required>
      <label>OOC Name:</label>
      <input type="text" id="oocName" required>
      <label>Tu·ªïi:</label>
      <input type="number" id="age" required>
      <label>Gi·ªõi t√≠nh:</label>
      <select id="gender" required>
        <option value="">-- Ch·ªçn gi·ªõi t√≠nh --</option>
        <option>Nam</option><option>N·ªØ</option><option>Kh√°c</option>
      </select>
      <label>Discord:</label>
      <input type="text" id="discord" required>
      <label>Kinh nghi·ªám RP (n·∫øu c√≥):</label>
      <textarea id="exp" rows="3"></textarea>
      <button type="submit">üöë B·∫Øt ƒë·∫ßu B√†i Test</button>
    </form>

    <!-- B√†i quiz -->
    <form id="quizForm" style="display:none;"></form>
    <button id="submitBtn" style="display:none;" onclick="submitQuiz(event)">‚úÖ N·ªôp B√†i</button>
  </div>

  <!-- Popup -->
  <div id="popup">
    <div class="box">
      <p>‚ùå Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu!</p>
      <button onclick="closePopup()">ƒê√≥ng</button>
    </div>
  </div>

<script>
/* ========== 25 C√ÇU H·ªéI TR·∫ÆC NGHI·ªÜM ========== */
const medicQuestions = [
  { q: "Khi ki·ªÉm tra m·∫°ch c·ªßa b·ªánh nh√¢n, v·ªã tr√≠ hay d√πng nh·∫•t l√†?",
    options: ["C·ªï tay", "Tr√°n", "B·ª•ng", "Vai"], a: 0 },
  { q: "Khi b·ªánh nh√¢n co gi·∫≠t, Medic n√™n?",
    options: ["Gi·ªØ an to√†n, kh√¥ng nh√©t v·∫≠t v√†o mi·ªáng", "Gi·ªØ ch·∫∑t tay ch√¢n", "Cho u·ªëng thu·ªëc ngay", "L·∫Øc m·∫°nh ƒë·ªÉ t·ªânh"], a: 0 },
  { q: "Khi ƒë∆∞a b·ªánh nh√¢n v√†o b·ªánh vi·ªán, Medic c·∫ßn l√†m g√¨ tr∆∞·ªõc?",
    options: ["B√†n giao cho b√°c sƒ©, b√°o t√¨nh tr·∫°ng", "ƒêi v·ªÅ lu√¥n", "Ng·ªìi ngh·ªâ", "ƒê·ª£i c√¥ng an"], a: 0 },
  { q: "BƒÉng tam gi√°c th∆∞·ªùng d√πng ƒë·ªÉ?",
    options: ["C·ªë ƒë·ªãnh g√£y x∆∞∆°ng, bƒÉng v·∫øt th∆∞∆°ng", "ƒêo huy·∫øt √°p", "Ti√™m thu·ªëc", "Kh·ª≠ tr√πng"], a: 0 },
  { q: "Tr∆∞·ªõc khi ti√™m thu·ªëc, Medic ph·∫£i?",
    options: ["Ki·ªÉm tra li·ªÅu, h·∫°n s·ª≠ d·ª•ng", "Ti√™m ngay", "H·ªèi √Ω ki·∫øn c·∫£nh s√°t", "Kh√¥ng c·∫ßn ki·ªÉm tra"], a: 0 },
  { q: "Khi b·ªánh nh√¢n n√¥n ra m√°u, b∆∞·ªõc x·ª≠ tr√≠ ƒë·∫ßu ti√™n?",
    options: ["ƒê·∫∑t n·∫±m nghi√™ng an to√†n", "Cho u·ªëng n∆∞·ªõc", "ƒê·ª©ng d·∫≠y v·∫≠n ƒë·ªông", "B·ªè qua"], a: 0 },
  { q: "M√°y ƒëo SpO2 d√πng ƒë·ªÉ?",
    options: ["ƒêo n·ªìng ƒë·ªô oxy trong m√°u", "ƒêo nh·ªãp tim", "ƒêo huy·∫øt √°p", "ƒêo nhi·ªát ƒë·ªô"], a: 0 },
  { q: "Medic khi l√°i xe c·∫ßn tu√¢n th·ªß?",
    options: ["Lu·∫≠t giao th√¥ng + b·∫≠t c√≤i ∆∞u ti√™n", "Mu·ªën ch·∫°y sao c≈©ng ƒë∆∞·ª£c", "Ch·∫°y nhanh nh·∫•t c√≥ th·ªÉ", "ƒêua v·ªõi police"], a: 0 },
  { q: "Tr·∫ª em b·∫•t t·ªânh c·∫ßn CPR nh∆∞ th·∫ø n√†o?",
    options: ["√âp ng·ª±c nh·∫π h∆°n, 1 tay ho·∫∑c 2 ng√≥n tay", "√âp m·∫°nh nh∆∞ ng∆∞·ªùi l·ªõn", "Kh√¥ng c·∫ßn CPR", "Ch·ªù t·ª± t·ªânh"], a: 0 },
  { q: "Khi v·∫≠n chuy·ªÉn b·ªánh nh√¢n c·ªôt s·ªëng nghi ng·ªù ch·∫•n th∆∞∆°ng, c·∫ßn?",
    options: ["C·ªë ƒë·ªãnh tr√™n v√°n c·ª©ng", "K√©o l√™n xe", "B·∫ø v√°c tr√™n vai", "Cho ng·ªìi gh·∫ø"], a: 0 },
  { q: "T√∫i y t·∫ø c√° nh√¢n Medic lu√¥n ph·∫£i c√≥?",
    options: ["BƒÉng g·∫°c, thu·ªëc c∆° b·∫£n, gƒÉng tay", "ƒê·ªì ƒÉn", "V≈© kh√≠", "ƒêi·ªán tho·∫°i"], a: 0 },
  { q: "Medic g·∫∑p ng∆∞·ªùi d√¢n ch·ª≠i b·ªõi, th√°i ƒë·ªô ƒë√∫ng l√†?",
    options: ["Gi·ªØ b√¨nh tƒ©nh, chuy√™n nghi·ªáp", "C√£i nhau l·∫°i", "ƒê√°nh nhau", "B·ªè ƒëi"], a: 0 },
  { q: "Khi h·ªó tr·ª£ police trong t√¨nh hu·ªëng combat, Medic n√™n?",
    options: ["Ch·ªâ c·∫•p c·ª©u sau khi an to√†n", "X√¥ng v√†o combat", "Mang s√∫ng h·ªó tr·ª£", "T·ª´ ch·ªëi c·ª©u"], a: 0 },
  { q: "Trong RP, Medic c√≥ th·ªÉ gi·∫£ ch·∫øt ƒë·ªÉ troll kh√¥ng?",
    options: ["Kh√¥ng", "C√≥", "Tu·ª≥ th√≠ch", "Khi vui"], a: 0 },
  { q: "Vi·ªác ghi log c·∫•p c·ª©u (log s·ªï b·ªánh √°n) gi√∫p?",
    options: ["Theo d√µi ca c·ª©u, minh b·∫°ch RP", "Kh√¥ng c√≥ t√°c d·ª•ng", "ƒê·ªÉ khoe", "ƒê·ªÉ b√°n"], a: 0 }
];
  { q: "VD n√†o sau ƒë√¢y l√† ƒë√∫ng IC?",
    options: ["Gi·ªõi thi·ªáu t√™n nh√¢n v·∫≠t trong RP", "N√≥i 'lag qu√°' trong game", "Chat OOC trong IC", "Xin admin revive"], a: 0 },
  { q: "VD n√†o sau ƒë√¢y l√† OOC?",
    options: ["N√≥i 't√¥i b·ªã disconnect'", "K√™u ƒëau b·ª•ng IC", "RP g·ªçi b√°c sƒ©", "H·ªèi t√™n nh√¢n v·∫≠t"], a: 0 },
  { q: "Khi b·ªã d√≠ s√∫ng v√†o ƒë·∫ßu, Fear RP ƒë√∫ng l√†?",
    options: ["Gi∆° tay, h·ª£p t√°c", "L·∫•y s√∫ng b·∫Øn tr·∫£", "Ch·∫°y ngay", "Ch·ª≠i l·∫°i"], a: 0 },
  { q: "Fail RP nghƒ©a l√†?",
    options: ["H√†nh ƒë·ªông sai quy t·∫Øc RP", "RP th√†nh c√¥ng", "Th·∫•t b·∫°i ngo√†i ƒë·ªùi", "L√†m h·ªèng combat"], a: 0 },
  { q: "RDM (Random Death Match) l√† g√¨?",
    options: ["Gi·∫øt ng∆∞·ªùi kh√¥ng l√Ω do RP", "ƒê·∫•u s√∫ng theo gi·∫£i", "Ng√£ ch·∫øt ng·∫´u nhi√™n", "Test server"], a: 0 },
  { q: "VD n√†o l√† Power Gaming?",
    options: ["RP b√™ nguy√™n xe h∆°i 1 m√¨nh", "G·ªçi c·∫•p c·ª©u", "ƒêeo bƒÉng b√≥", "U·ªëng n∆∞·ªõc"], a: 0 },
  { q: "VD n√†o l√† Meta Gaming?",
    options: ["ƒê·ªçc chat OOC ƒë·ªÉ t√¨m ƒë·ªëi th·ªß", "RP h·ªèi t√™n", "Nghe gi·ªõi thi·ªáu IC", "ƒêeo b·∫£ng t√™n"], a: 0 },
  { q: "Combat Logging b·ªã x·ª≠ l√Ω th·∫ø n√†o?",
    options: ["B·ªã warn/ban", "ƒê∆∞·ª£c th∆∞·ªüng", "Kh√¥ng sao", "ƒê∆∞·ª£c revive"], a: 0 },
  { q: "Trong RP, d√πng /me ƒë·ªÉ?",
    options: ["M√¥ t·∫£ h√†nh ƒë·ªông nh√¢n v·∫≠t", "Chat ri√™ng", "N√≥i chuy·ªán OOC", "ƒê√°nh gi√° server"], a: 0 },
  { q: "N·∫øu ƒë·ªìng ƒë·ªôi Fail RP, b·∫°n n√™n?",
    options: ["Nh·∫Øc nh·ªü, b√°o c√°o OOC n·∫øu c·∫ßn", "H√πa theo", "Gi·∫£ v·ªù kh√¥ng th·∫•y", "Ch·ª≠i IC"], a: 0 }
];
const scenarios = [
  { q: "B·∫°n ƒëang c·∫•p c·ª©u th√¨ b·ªánh nh√¢n disconnect gi·ªØa ch·ª´ng, b·∫°n s·∫Ω RP th·∫ø n√†o?" },
  { q: "M·ªôt ng∆∞·ªùi b·ªã tai n·∫°n nh∆∞ng c·ªë t√¨nh troll, kh√¥ng h·ª£p t√°c, b·∫°n x·ª≠ l√Ω ra sao?" },
  { q: "Trong l√∫c c·ª©u ng∆∞·ªùi, police y√™u c·∫ßu r·ªùi kh·ªèi hi·ªán tr∆∞·ªùng ngay, b·∫°n RP th·∫ø n√†o?" },
  { q: "C√≥ ng∆∞·ªùi gi·∫£ v·ªù Medic ƒë·ªÉ troll, b·∫°n s·∫Ω ph·∫£n ·ª©ng v√† RP th·∫ø n√†o?" },
  { q: "B·∫°n g·∫∑p 2 b·ªánh nh√¢n c√£i nhau, m·ªôt ng∆∞·ªùi t·ª´ ch·ªëi ch·ªØa tr·ªã, b·∫°n x·ª≠ l√Ω th·∫ø n√†o?" }
];

let submitted = false;

/* ================= B·∫ÆT ƒê·∫¶U QUIZ ================= */
function startQuiz() {
  const icName = document.getElementById("icName").value.trim();
  const oocName = document.getElementById("oocName").value.trim();
  const age = document.getElementById("age").value.trim();
  const gender = document.getElementById("gender").value.trim();
  const discord = document.getElementById("discord").value.trim();

  if (!icName || !oocName || !age || !gender || !discord) {
    document.getElementById("popup").style.display = "flex";
    return;
  }

  // Disable form th√¥ng tin
  document.querySelectorAll("#infoForm input,#infoForm select,#infoForm textarea,#infoForm button")
    .forEach(el => el.disabled = true);
  document.getElementById("infoForm").style.opacity = "0.6";

  // Render quiz
  const quizForm = document.getElementById("quizForm");
  quizForm.innerHTML = "";
  quizForm.style.display = "block";
  document.getElementById("submitBtn").style.display = "inline-block";

  questions.forEach((q,i)=>{
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<p><b>${i+1}. ${q.q}</b></p>`;
    const opts = document.createElement("div"); opts.className="options";

    // random ƒë√°p √°n
    q.options.map((opt,idx)=>({opt,idx}))
      .sort(()=>Math.random()-0.5)
      .forEach(item=>{
        const isCorrect = item.idx===q.a?1:0;
        opts.innerHTML += `
          <label>
            <input type="radio" name="q${i}" data-correct="${isCorrect}"> ${item.opt}
          </label>`;
      });

    div.appendChild(opts);
    quizForm.appendChild(div);
  });

  scenarios.forEach((s,i)=>{
    const div=document.createElement("div");
    div.className="question";
    div.innerHTML=`<p><b>${questions.length+i+1}. ${s.q}</b></p>
                   <textarea name="s${i}" rows="3" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi RP..."></textarea>`;
    quizForm.appendChild(div);
  });
}

/* ================= N·ªòP QUIZ ================= */
function submitQuiz(e) {
  e.preventDefault();
  if (submitted) return;
  submitted = true;

  const btn=document.getElementById("submitBtn");
  btn.disabled=true; btn.innerText="ƒêang g·ª≠i...";

  let score=0;
  questions.forEach((q,i)=>{
    const sel=document.querySelector(`input[name="q${i}"]:checked`);
    if(sel && sel.dataset.correct==="1") score++;
  });

  const scenarioAnswers=scenarios.map((s,i)=>({
    question:s.q, answer:document.querySelector(`textarea[name="s${i}"]`).value
  }));

  const info={
    icName:document.getElementById("icName").value,
    oocName:document.getElementById("oocName").value,
    age:document.getElementById("age").value,
    gender:document.getElementById("gender").value,
    discord:document.getElementById("discord").value,
    exp:document.getElementById("exp").value,
    score, total:questions.length,
    scenarios:scenarioAnswers
  };

  localStorage.setItem("quizResult",JSON.stringify(info));

  // g·ª≠i Discord
  const webhookURL="https://discord.com/api/webhooks/1419662336272236654/MMr1GaG1N5ULoxT3xcZXY-SIaknPG4IDLFHbmILT9WeCA-OirDoEPZ-KxJNeC2kBCxSN"; 
  const embeds=scenarioAnswers.map((s,idx)=>({
    title:`T√¨nh hu·ªëng ${idx+1}`,
    description:`**C√¢u h·ªèi:** ${s.question}\n**Tr·∫£ l·ªùi:** ${s.answer||"_(tr·ªëng)_"}`
  }));

  fetch(webhookURL,{
    method:"POST", headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      content:"<@&1414936349571813376>  <@&1414936763700351036>üì¢ C√≥ b√†i ph·ªèng v·∫•n m·ªõi c·∫ßn ch·∫•m ƒëi·ªÉm!",
      username:"Medic log",
      embeds:[
        {
          title:`üìã B√†i ph·ªèng v·∫•n c·ªßa ${info.icName} (${info.oocName})`,
          description:`ƒêi·ªÉm tr·∫Øc nghi·ªám: **${score}/${questions.length}**`,
          color:15844367,
          fields:[
            {name:"Discord",value:info.discord,inline:true},
            {name:"Tu·ªïi",value:info.age,inline:true},
            {name:"Gi·ªõi t√≠nh",value:info.gender,inline:true},
            {name:"Kinh nghi·ªám",value:info.exp||"Kh√¥ng c√≥"}
          ]
        },
        ...embeds
      ]
    })
  }).catch(err=>console.error("Webhook error:",err));

  document.querySelector(".container").innerHTML=`
    <h2>‚úÖ B√†i ph·ªèng v·∫•n ƒë√£ ƒë∆∞·ª£c g·ª≠i!</h2>
    <p>Th√¥ng tin v√† ph·∫ßn tr·∫£ l·ªùi ƒë√£ ƒë∆∞·ª£c chuy·ªÉn v·ªÅ <b>Ban Qu·∫£n Tr·ªã MEDIC</b> ƒë·ªÉ ch·∫•m ƒëi·ªÉm.<br>
    Vui l√≤ng ch·ªù k·∫øt qu·∫£ ·ª©ng tuy·ªÉn.</p>`;
}

/* ================= Popup ================= */
function closePopup(){ document.getElementById("popup").style.display="none"; }
</script>
</body>
</html>
